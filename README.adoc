:doctype: book
:toc: left
:toclevels: 3
:sectnums:
:icons: font
:source-highlighter: highlightjs
:idprefix:
:idseparator: -
:sectlinks:
:sectanchors:
:linkcss: false

:short-bonita-version: 10.3
:doc-url: https://documentation.bonitasoft.com/bonita/{short-bonita-version}
:java-version: 17
:github-url: https://github.com/bonitasoft-presales/connector-merge-pdf

= Connector Merge PDF

image:src/main/resources/connector.png[Connector Icon]

A Bonita connector that merges multiple PDF documents into a single PDF file.

== Features

* Merge two or more PDF documents into a single document
* Preserve page order from source documents
* Customizable output filename
* Validates that all input documents are PDFs (by MIME type or file extension)

== Requirements

* Bonita {short-bonita-version} or higher
* Java {java-version}

== Installation

1. Download the latest release (`connector-merge-pdf-X.Y.Z-impl.zip`) from the {github-url}/releases[releases page]
2. {doc-url}/managing-extension-studio[Install the connector in your Bonita project using the Studio]

== Usage

=== Inputs

[cols="1,1,1,3"]
|===
|Name |Type |Required |Description

|`documents`
|`List<Document>`
|Yes
|List of PDF documents to merge. Must contain at least 2 documents.

|`outputFileName`
|`String`
|Yes
|The filename for the merged PDF document (e.g., `merged-report.pdf`).
|===

=== Outputs

[cols="1,1,3"]
|===
|Name |Type |Description

|`mergedDocument`
|`DocumentValue`
|The merged PDF document that can be attached to the process.
|===

=== Example Usage in Bonita

==== 1. Configure the connector in a service task

Add the connector to a service task in your process and configure the inputs:

* **documents**: Use a Groovy expression to collect documents, for example:
+
[source,groovy]
----
[document1, document2, document3]
----
+
Or retrieve documents from a multiple document variable:
+
[source,groovy]
----
myDocumentList
----

* **outputFileName**: Specify the output filename:
+
[source,groovy]
----
"merged-" + java.time.LocalDate.now() + ".pdf"
----

==== 2. Store the output

Map the `mergedDocument` output to a document variable in your process to store or use the merged PDF.

== Development

=== Prerequisites

* Java JDK {java-version} or higher
* Maven (optional, project includes Maven wrapper)
* Git

=== Building

[source,bash]
----
git clone {github-url}.git
cd connector-merge-pdf/
./mvnw clean package
----

The build produces:

* `target/connector-merge-pdf-X.Y.Z.jar` - The connector JAR
* `target/connector-merge-pdf-X.Y.Z-impl.zip` - The deployable connector archive

=== Running Tests

[source,bash]
----
./mvnw clean test
----

== Contributing

Contributions are welcome! Please fork the repository and submit a pull request.

== Links

* Repository: {github-url}
* Issue tracker: {github-url}/issues
* Bonita documentation: {doc-url}/connectors-overview[Connectors Overview]
